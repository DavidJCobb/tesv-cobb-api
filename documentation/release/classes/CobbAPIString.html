<!doctype html><html><head>
      <meta charset="UTF-8">
      <link rel="stylesheet" href="../resources/main.css">
   <title>CobbAPIString Script - CobbAPI Documentation</title></head>
   <body>
      <nav id="sidebar" t-context="index">
         <h1>Navigation</h1>
         <a href="../index.html">Index</a>
         <h2>Classes</h2>
         <ul>
            
               <li data-class-name="CobbAPI" data-class-file="CobbAPI.xml">
                  
                  
                  <a href="../classes/CobbAPI.html">
                     
                     CobbAPI
                  </a>
               </li>
            
               <li data-class-name="CobbAPIAcousticSpace" data-class-file="AcousticSpace.xml">
                  
                  
                  <a href="../classes/CobbAPIAcousticSpace.html">
                     
                     CobbAPIAcousticSpace
                  </a>
               </li>
            
               <li data-class-name="CobbAPIActor" data-class-file="Actor.xml">
                  
                  
                  <a href="../classes/CobbAPIActor.html">
                     
                     CobbAPIActor
                  </a>
               </li>
            
               <li data-class-name="CobbAPIArray" data-class-file="Array.xml">
                  
                  
                  <a href="../classes/CobbAPIArray.html">
                     
                     CobbAPIArray
                  </a>
               </li>
            
               <li data-class-name="CobbAPIBatchMove" data-class-file="BatchMove.xml">
                  
                  
                  <a href="../classes/CobbAPIBatchMove.html">
                     
                     CobbAPIBatchMove
                  </a>
               </li>
            
               <li data-class-name="CobbAPIBatchMoveGroup" data-class-file="BatchMoveGroup.xml">
                  
                  
                  <a href="../classes/CobbAPIBatchMoveGroup.html">
                     
                     CobbAPIBatchMoveGroup
                  </a>
               </li>
            
               <li data-class-name="CobbAPIBatchMoveRel" data-class-file="BatchMoveRel.xml">
                  
                  
                  <a href="../classes/CobbAPIBatchMoveRel.html">
                     
                     CobbAPIBatchMoveRel
                  </a>
               </li>
            
               <li data-class-name="CobbAPIBatchSetMotionType" data-class-file="BatchSetMotionType.xml">
                  
                  
                  <a href="../classes/CobbAPIBatchSetMotionType.html">
                     
                     CobbAPIBatchSetMotionType
                  </a>
               </li>
            
               <li data-class-name="CobbAPIBatchSpawnComplex" data-class-file="BatchSpawnComplex.xml">
                  
                  
                  <a href="../classes/CobbAPIBatchSpawnComplex.html">
                     
                     CobbAPIBatchSpawnComplex
                  </a>
               </li>
            
               <li data-class-name="CobbAPIBatchSpawnRel" data-class-file="BatchSpawnRel.xml">
                  
                  
                  <a href="../classes/CobbAPIBatchSpawnRel.html">
                     
                     CobbAPIBatchSpawnRel
                  </a>
               </li>
            
               <li data-class-name="CobbAPICell" data-class-file="Cell.xml">
                  
                  
                  <a href="../classes/CobbAPICell.html">
                     
                     CobbAPICell
                  </a>
               </li>
            
               <li data-class-name="CobbAPICellSearcher" data-class-file="CellSearcher.xml">
                  
                  
                  <a href="../classes/CobbAPICellSearcher.html">
                     
                     CobbAPICellSearcher
                  </a>
               </li>
            
               <li data-class-name="CobbAPIDetection" data-class-file="Detection.xml">
                  
                  
                  <a href="../classes/CobbAPIDetection.html">
                     
                     CobbAPIDetection
                  </a>
               </li>
            
               <li data-class-name="CobbAPIForm" data-class-file="Form.xml">
                  
                  
                  <a href="../classes/CobbAPIForm.html">
                     
                     CobbAPIForm
                  </a>
               </li>
            
               <li data-class-name="CobbAPIFurniture" data-class-file="Furniture.xml">
                  
                  
                  <a href="../classes/CobbAPIFurniture.html">
                     
                     CobbAPIFurniture
                  </a>
               </li>
            
               <li data-class-name="CobbAPIGame" data-class-file="Game.xml">
                  
                  
                  <a href="../classes/CobbAPIGame.html">
                     
                     CobbAPIGame
                  </a>
               </li>
            
               <li data-class-name="CobbAPIImageSpace" data-class-file="ImageSpace.xml">
                  
                  
                  <a href="../classes/CobbAPIImageSpace.html">
                     
                     CobbAPIImageSpace
                  </a>
               </li>
            
               <li data-class-name="CobbAPILight" data-class-file="Light.xml">
                  
                  
                  <a href="../classes/CobbAPILight.html">
                     
                     CobbAPILight
                  </a>
               </li>
            
               <li data-class-name="CobbAPILightingTemplate" data-class-file="LightingTemplate.xml">
                  
                  
                  <a href="../classes/CobbAPILightingTemplate.html">
                     
                     CobbAPILightingTemplate
                  </a>
               </li>
            
               <li data-class-name="CobbAPIMessage" data-class-file="Message.xml">
                  
                  
                  <a href="../classes/CobbAPIMessage.html">
                     
                     CobbAPIMessage
                  </a>
               </li>
            
               <li data-class-name="CobbAPIObjectReference" data-class-file="ObjectReference.xml">
                  
                  
                  <a href="../classes/CobbAPIObjectReference.html">
                     
                     CobbAPIObjectReference
                  </a>
               </li>
            
               <li data-class-name="CobbAPIRevealService" data-class-file="RevealService.xml">
                  
                  
                  <a href="../classes/CobbAPIRevealService.html">
                     
                     CobbAPIRevealService
                  </a>
               </li>
            
               <li data-class-name="CobbAPIRotations" data-class-file="Rotations.xml">
                  
                  
                  <a href="../classes/CobbAPIRotations.html">
                     
                     CobbAPIRotations
                  </a>
               </li>
            
               <li data-class-name="CobbAPIShout" data-class-file="Shout.xml">
                  
                  
                  <a href="../classes/CobbAPIShout.html">
                     
                     CobbAPIShout
                  </a>
               </li>
            
               <li data-class-name="CobbAPISimpleSearches" data-class-file="SimpleSearches.xml">
                  
                  
                  <a href="../classes/CobbAPISimpleSearches.html">
                     
                     CobbAPISimpleSearches
                  </a>
               </li>
            
               <li data-class-name="CobbAPIString" data-class-file="String.xml" class="selected">
                  
                  
                  <span>
                     
                     CobbAPIString
                  </span>
               </li>
            
               <li data-class-name="CobbAPIUtility" data-class-file="Utility.xml">
                  
                  
                  <a href="../classes/CobbAPIUtility.html">
                     
                     CobbAPIUtility
                  </a>
               </li>
            
               <li data-class-name="CobbAPIWorldspace" data-class-file="Worldspace.xml">
                  
                  
                  <a href="../classes/CobbAPIWorldspace.html">
                     
                     CobbAPIWorldspace
                  </a>
               </li>
            
         </ul>
         <h2>Concepts</h2>
         <ul>
            
               <li data-concept-name="Actor values">
                  
                  <a href="../concepts/Actor values.html">
                     
                     Actor values
                  </a>
               </li>
            
         
               <li data-concept-name="Changeflags">
                  
                  <a href="../concepts/Changeflags.html">
                     
                     Changeflags
                  </a>
               </li>
            
         
               <li data-concept-name="Detection events">
                  
                  <a href="../concepts/Detection events.html">
                     
                     Detection events
                  </a>
               </li>
            
         
               <li data-concept-name="Load doors">
                  
                  <a href="../concepts/Load doors.html">
                     
                     Load doors
                  </a>
               </li>
            
         </ul>
      </nav>
      <main>
         <h1>CobbAPIString</h1>
         <p>
         These functions can be used to work with Papyrus strings. Unlike the functions offered 
         by SKSE, these are generally UTF-8-aware.
      </p>
      <h2>An overview of how computers store text</h2>
      <p>
         In order to avoid ambiguity, I would prefer to document things using the most precise 
         terminology possible, but much of this terminology isn't known to people who don't 
         explicitly do "serious" text programming. I had to do some learning myself in order to 
         offer as much functionality as I wanted to. As such, here's a "brief" primer on how 
         computers store text.
      </p>
      <p>
         Computers can only work with numeric data, so every symbol that a piece of text may 
         contain must be represented using a number, or "code point." The oldest surviving 
         system for this is ASCII (American Standard Code for Information Interchange), which 
         was introduced in 1963. In this system, every single glyph is represented with a 
         single byte, and so up to 256 glyphs (including a string terminator and other control 
         codes) can be represented. ASCII only defined 128 glyphs, all focused on English text, 
         leaving the last 128 glyphs undefined.
      </p>
      <p>
         As such, non-English text could only be represented in alternate encodings. Because 
         virtually all programming is done in English, these encodings are typically supersets 
         of ASCII. For languages that have large numbers of glyphs, such as Chinese, Japanese, 
         Korean, and Vietnamese, these encodings often have to use multiple bytes for some or 
         all glyphs.
      </p>
      <p>
         In 1991, the Unicode standard was published. It uses multiple bytes for all glyphs in 
         order to maximize its coverage and support as many languages and scripts as possible, 
         but there are alternate encodings (such as UTF-8) that are designed to compress Unicode 
         text whenever possible, with a focus on representing ASCII as compactly as possible 
         (given that markup and program code, invisible to a user, will be in ASCII).
      </p>
      <p>
         Unicode has nuances that are largely invisible to native English-speaking programmers, 
         who won't encounter or have to work with foreign-language text unless they put 
         themselves in situations where they may encounter it. Native English-speaking 
         programmers are used to the assumptions that one glyph will be represented one way 
         using one byte, and all of those assumptions fall apart when using Unicode and UTF-8.
      </p>
      <p>
         A single glyph can be represented using multiple code point sequences: Unicode offers 
         better ways of representing glyphs that have diacritics, but it also retains older 
         representations for backward compatibility's sake. Moreover, a single code point will 
         be multiple bytes in Unicode; in UTF-8, ASCII code points are single-byte while all 
         other code points are multi-byte (with higher code points requiring more bytes).
      </p>
      <p>
         The string functions offered by CobbAPI are Unicode-aware, and the documentation will 
         reflect this: string lengths, character comparisons, and more are done on the basis of 
         code points, not glyphs or bytes.
      </p>
      <h2>String handling in Papyrus</h2>
      <p>
         When Papyrus strings are written to ESP and ESM files, they are always written in 
         UTF-8, regardless of the language in use by a mod author's system. I assume that UTF-8 
         is also used for Papyrus strings at run-time. (I'm not sure what would happen to string 
         constants in a script, though; does the Papyrus Compiler treat all files as UTF-8?)
      </p>
      <p>
         It's worth noting that non-Papyrus strings are not guaranteed to use UTF-8. In Skyrim 
         Classic, the text encoding used by the rest of the game varies from language to 
         language. Worse, ESP and ESM files don't contain any metadata identifying their 
         language or their encoding. As such, Papyrus functions that pull strings from game 
         data (such as getters for editor IDs and actors' names) will generally return data in 
         an unknown encoding, which may or may not be UTF-8.
      </p>
      <p>
         Papyrus strings are stored case-insensitively according to the C/POSIX locale (which 
         determines what characters are considered "letters" with uppercase and lowercase 
         forms). As such, the following glyphs, and only the following glyphs, are considered 
         interchangeable:
      </p>
      <table class="sideways">
         <tbody>
            <tr>
               <th>Uppercase</th>
               <td>A</td>
               <td>B</td>
               <td>C</td>
               <td>D</td>
               <td>E</td>
               <td>F</td>
               <td>G</td>
               <td>H</td>
               <td>I</td>
               <td>J</td>
               <td>K</td>
               <td>L</td>
               <td>M</td>
               <td>N</td>
               <td>O</td>
               <td>P</td>
               <td>Q</td>
               <td>R</td>
               <td>S</td>
               <td>T</td>
               <td>U</td>
               <td>V</td>
               <td>W</td>
               <td>X</td>
               <td>Y</td>
               <td>Z</td>
            </tr>
            <tr>
               <th>Lowercase</th>
               <td>a</td>
               <td>b</td>
               <td>c</td>
               <td>d</td>
               <td>e</td>
               <td>f</td>
               <td>g</td>
               <td>h</td>
               <td>i</td>
               <td>j</td>
               <td>k</td>
               <td>l</td>
               <td>m</td>
               <td>n</td>
               <td>o</td>
               <td>p</td>
               <td>q</td>
               <td>r</td>
               <td>s</td>
               <td>t</td>
               <td>u</td>
               <td>v</td>
               <td>w</td>
               <td>x</td>
               <td>y</td>
               <td>z</td>
            </tr>
         </tbody>
      </table>
      <p>
         The game handles case-insensitivity byte by byte, so an accented letter will be 
         handled differently depending on whether it is a single code point or two (a 
         non-accented letter followed by an accent diacritic).
      </p>
      <p>
         If you specify two different strings that are identical save for case, the game will 
         use the first variant to load. The catch is that this applies across most or all of the 
         game engine, not just within Papyrus. In an English game, it is impossible to set a 
         Papyrus string variable to "dog" because there is already an in-game Race form named 
         "Dog", and so "Dog" was the first variant of the string to load. Similarly, trying to 
         set a string to "oBjEcTreferenCE" will always yield "ObjectReference" instead.
      </p>
   
         
         
            <h2>Methods</h2>
            <dl>
               
                  <dt>
                     
                        Int
                     
                     <a href="../classes/CobbAPIString/BinaryToInt32.html"><!--
                     --><!--
                     -->BinaryToInt32<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String
                           asString<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Converts a stringified binary number to an integer.
         </dd>
               
                  <dt>
                     
                        Int
                     
                     <a href="../classes/CobbAPIString/CPLength.html"><!--
                     --><!--
                     -->CPLength<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String
                           asString<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Returns a string's length in code points.
         </dd>
               
                  <dt>
                     
                        Int
                     
                     <a href="../classes/CobbAPIString/HexToInt32.html"><!--
                     --><!--
                     -->HexToInt32<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String
                           asString<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Converts a stringified hexadecimal number to an integer.
         </dd>
               
                  <dt>
                     
                        Int
                     
                     <a href="../classes/CobbAPIString/NaturalCompare_ASCII.html"><!--
                     --><!--
                     -->NaturalCompare_ASCII<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String
                           a, <!--
                  --><!--
                        -->String
                           b<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Perform a "natural" comparison on two strings.
         </dd>
               
                  <dt>
                     
                        Int
                     
                     <a href="../classes/CobbAPIString/NaturalSort_ASCII.html"><!--
                     --><!--
                     -->NaturalSort_ASCII<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String[]
                           asStrings, <!--
                  --><!--
                        -->Bool
                           abDescending<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Performs a "natural" sort on an array of strings.
         </dd>
               
                  <dt>
                     
                        Int
                     
                     <a href="../classes/CobbAPIString/NaturalSortPairForm_ASCII.html"><!--
                     --><!--
                     -->NaturalSortPairForm_ASCII<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String[]
                           asStrings, <!--
                  --><!--
                        -->Form[]
                           axSecond, <!--
                  --><!--
                        -->Bool
                           abDescending<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Performs a "natural" sort on an array of strings, and on a matching array.
         </dd>
               
                  <dt>
                     
                        Int
                     
                     <a href="../classes/CobbAPIString/NaturalSortPairInt_ASCII.html"><!--
                     --><!--
                     -->NaturalSortPairInt_ASCII<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String[]
                           asStrings, <!--
                  --><!--
                        -->Int[]
                           axSecond, <!--
                  --><!--
                        -->Bool
                           abDescending<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Performs a "natural" sort on an array of strings, and on a matching array.
         </dd>
               
                  <dt>
                     
                        String[]
                     
                     <a href="../classes/CobbAPIString/RegexMatch.html"><!--
                     --><!--
                     -->RegexMatch<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String
                           asHaystack, <!--
                  --><!--
                        -->String
                           asRegex, <!--
                  --><!--
                        -->String
                           asCaseSentinel, <!--
                  --><!--
                        -->Bool
                           abWholeStringMustMatch<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Performs a regular expression match on a string.
         </dd>
               
                  <dt>
                     
                        String
                     
                     <a href="../classes/CobbAPIString/RegexReplace.html"><!--
                     --><!--
                     -->RegexReplace<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String
                           asHaystack, <!--
                  --><!--
                        -->String
                           asRegex, <!--
                  --><!--
                        -->String
                           asCaseSentinel, <!--
                  --><!--
                        -->String
                           asReplaceWith<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Replaces substrings based on a regex.
         </dd>
               
                  <dt>
                     
                        Bool
                     
                     <a href="../classes/CobbAPIString/RegexSearch.html"><!--
                     --><!--
                     -->RegexSearch<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String
                           asHaystack, <!--
                  --><!--
                        -->String
                           asRegex, <!--
                  --><!--
                        -->String
                           asCaseSentinel<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Checks whether a string contains a given substring.
         </dd>
               
                  <dt>
                     
                        String
                     
                     <a href="../classes/CobbAPIString/ToBinary.html"><!--
                     --><!--
                     -->ToBinary<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->Int
                           aiBinary, <!--
                  --><!--
                        -->Int
                           aiDigits<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Converts an integer to a binary string representation.
         </dd>
               
                  <dt>
                     
                        String
                     
                     <a href="../classes/CobbAPIString/ToHex.html"><!--
                     --><!--
                     -->ToHex<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->Int
                           aiHex, <!--
                  --><!--
                        -->Int
                           aiDigits<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Converts an integer to a hexadecimal string representation.
         </dd>
               
                  <dt>
                     
                        String
                     
                     <a href="../classes/CobbAPIString/Trim.html"><!--
                     --><!--
                     -->Trim<!--
                  --></a><!--
                  -->(<!-- TODO: ARGS ARE BROKEN --><!--
                  --><!--
                     --><!--
                        -->String
                           asString<!--
                  --><!--
                     --><!--
                  -->)
                  </dt>
                  <dd>Trims spaces off of the start and end of the string.
         </dd>
               
            </dl>
         
      </main>
      
      
      
      
      
      
      
      
      
   
</body></html>